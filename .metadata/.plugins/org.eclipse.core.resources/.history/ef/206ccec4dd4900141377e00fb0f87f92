package magServer;

class Mortar(int ID){ //need function for after the mortar leaves
	String fuze = "0";
	String gps = "AA000000000000";
	String elev = "00000";
	String message = ("iam "+ID+","+fuze+","+gps+","+elev);
	boolean stillThere;
  
	public void function sendSelf(String message){
    self.MortarSocket.sendToSocket(message)
	}
  
	public void updateSelf(String newFuze, String newGps, String newElev){		//takes info from controller, changes data on mortar
		void fuze = newFuze;
		void gps = newGps;
		void elev = newElev;
		}
	public void recieveData(String message){
		if (message.substring(0,2) == "iam"){
			receiveIAm(message)
			}
		else if (message.substring(1,6)==" here"){
			stillHere = true //send message back to mortar that is ID+" acknowledge"
		 	};
		};
    
	public void receiveIAm(String newMessage){	//update self based on message
		updateSelf(newMessage.substring(2,3),newMessage.substring(4,18),newMessage.substring(0,1),(19,23));
		super.super.super.updateTablet();
	}
	mortarListener = new MortarSocket()
	mortarListener.start()
}
class MortarSocket implements Runnable{
  clHost ="192.168.1.1";
  int clPort = 4445;
  dSock = new Socket(clHost, clPort);
  OutputStreamWriter os = new OutputStreamWriter(dSock.getOutputStream(), "UTF-8"); //For sending:: Use .write to send data over os
  BufferedReader is = new BufferedReader(new InputStreamReader(dSock.getInputStream())); //For receiving::

  public void sendToSocket(String message){
    os.write(message)
  }
  
  public void run(){
    String message = "";
    while((str = is.readLine()) != null) {
      message = message + str
    }
    super.receiveData(message)
  }
}

class MortarPing implements Runnable{
  pingHost = "192.168.1.1";
  int pingPort = 4446;
  pingSock = new Socket(pingHost, pingPort);
}
